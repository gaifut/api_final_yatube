# api_final - API социальной сети

## Оглавление:
- [Стек технологий.](#Стек-технологий)
- [Краткое описание проекта.](#Краткое-описание-проекта)
- [Как запустить проект.](#Как-запустить-проект)
- [Примеры запросов к API.](#Примеры-запросов-к-API)

## Стек технологий
- Python
- Django
- DRF
- JWT токены
- Проект написан на Linux

## Краткое описание проекта:
Данный проект является учебным и представляет из себя макет социальной сети. Пользователи могут:
- Создавать, редактировать и удалять свои посты.
- Комментировать посты.
- Редактировать и удалять свои комментарии.
- Подписываться на других пользователей.

Основная цель проекта - применить теоретичесие знания на практике, используя принцип API First.


## Как запустить проект:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/gaifut/api_final_yatube.git
```

```
cd api_final_yatube
```

Cоздать и активировать виртуальное окружение:

```
python3.9 -m venv venv
```

```
. venv/bin/activate
```

Установить зависимости из файла requirements.txt:

```
pip install --upgrade pip
```

```
pip install -r requirements.txt
```

Выполнить миграции:

```
python3.9 manage.py migrate
```

Запустить проект:

```
python3.9 manage.py runserver
```

_Дополнительная информация_

_Postman-коллекция для проверки API_

Файл `API_for_yatube.postman_collection.json` содержит postman-коллекцию - набор заранее подготовленных запросов для проверки работы API.

_Подготовка Django-проекта к запуску коллекции:_
1. Проверьте, что виртуальное окружение развёрнуто и активировано, зависимости проекта установлены.
2. Перейдите в директорию *postman_collection* и командой `bash set_up_data.sh`` запустите bash-скрипт для создания необходимых для работы коллекции объектов в базе данных.  
*Внимание, скрипт предварительно очищает существующую базу данных.*
3. Перейдите в директорию с файлом `manage.py` и запустите тестовый сервер.

_Загрузка коллекции в Postman:_

1. Запустите Postman;
2. В левом верхнем углу нажмите `File` -> `Import`;
3. Во всплывающем окне будет предложено перетащить в него файл с коллекцией либо выбрать файл через окно файлового менеджера.
Загрузите файл `API_for_yatube.postman_collection.json` в Postman.

_Запуск коллекции:_

1. После выполнения предыдущих шагов, в левой части окна Postman во вкладке `Collections` появилась импортированная коллекция.
Наведите на нее, нажмите на три точки напротив названия коллекции и в выпадающем списке выберите `Run collection`. В центре экрана появится список запросов коллекции,
а в правой части экрана - меню для настройки параметров запуска;
2. В правом меню включите фунцию `Persist responses for a session` - это даст возможность посмотреть ответы API после запуска коллекции;
3. Нажмите кнопку `Run <название коллекции>`;
4. В центре экрана отобразится результат запуска коллекции и тестов. Провалившиеся тесты можно отфильтровать, перейдя во вкладку `Failed`.
Посмотрите детали выполненного запроса и полученного ответа: для этого нажмите на тест.
  

## Примеры запросов к API:

**Получение публикаций**
Получить список всех публикаций. При указании параметров **limit** (количество публикаций на страницу) и **offset** (номер страницы после которой начинать выдачу) выдача должна работать с пагинацией.
Тип запроса: GET.

#URL:
```
http://127.0.0.1:8000/api/v1/posts/
```

**Добавление комментария**
Добавление нового комментария к публикации. Анонимные запросы запрещены.
Вместо {post_id} указать номер интересующего поста.
Тип запроса: POST.

#URL:
```
http://127.0.0.1:8000/api/v1/posts/{post_id}/comments/
```
#Содержание запроса:
```
{
  "text": "string"
}
```

**Подписка**
Подписка пользователя от имени которого сделан запрос на пользователя переданного в теле запроса. Анонимные запросы запрещены.
Тип запроса: POST.

#URL:
```
http://127.0.0.1:8000/api/v1/follow/
```
#Содержание запроса:
```
{
"following": "string"
}
```

**Получить JWT-токен**
Получение JWT-токена. Необходимо указать имя пользователя и пароль.
Тип запроса: POST.

#URL:
```
http://127.0.0.1:8000/api/v1/jwt/create/
```
#Содержание запроса:
```
{
  "username": "string",
  "password": "string"
}
```
